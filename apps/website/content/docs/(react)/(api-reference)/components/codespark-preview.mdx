---
title: CodesparkPreview
description: A sandboxed preview component that renders compiled code in an iframe.
---

`CodesparkPreview` is a sandboxed preview component that executes compiled React code in an isolated iframe environment. It supports Tailwind CSS, custom scripts/styles injection, and console output capture.

```tsx
import { CodesparkPreview } from '@codespark/react';
```

## Basic Usage

```tsx
<CodesparkPreview code="anything you want to preview...">
```

```tsx codespark-preview height=120
import { CodesparkPreview } from '@codespark/react';

const code = `import dayjs from 'dayjs';
import { useEffect, useState } from 'react';

export default function App() {
  const [time, setTime] = useState(dayjs());

  useEffect(() => {
    const timer = setInterval(() => setTime(dayjs()), 1000);
    return () => clearInterval(timer);
  }, []);

  return (
    <div className="flex items-center justify-center gap-6 p-4">
      <div className="text-center">
        <p className="text-3xl font-bold tabular-nums">{time.format('HH:mm:ss')}</p>
        <p className="text-sm text-gray-500">{time.format('YYYY-MM-DD')}</p>
      </div>
    </div>
  );
}`;

export default function App() {
  return <CodesparkPreview code={code} height={120} />;
}
```

## Props

### code

Source code to preview. Used when not providing a workspace instance.

| Type | Default | Since |
| ---- | ------- | ----- |
| `string` | - | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview code="export default () => <div>Hello</div>" />
```

### workspace

Workspace instance to use for compilation and file management.

| Type | Default | Since |
| ---- | ------- | ----- |
| `Workspace` | Inherited from context | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview, Workspace } from '@codespark/react';

const workspace = new Workspace({
  entry: './App.tsx',
  files: { './App.tsx': 'export default () => <div>Hello</div>' }
});

<CodesparkPreview workspace={workspace} />
```

### theme

Theme mode for the preview.

| Type | Default | Since |
| ---- | ------- | ----- |
| `'light' \| 'dark'` | Inherited from context | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview theme="dark" />
```

### framework

Framework to use for code analysis and compilation.

| Type | Default | Since |
| ---- | ------- | ----- |
| `Framework \| (new () => Framework) \| string` | Inherited from context | v1.0.0 |

```tsx twoslash
// @noErrors
import { html } from '@codespark/framework/html';
import { CodesparkPreview } from '@codespark/react';

<CodesparkPreview framework={html} />
```

### tailwindcss

Whether to enable Tailwind CSS support in the preview.

| Type | Default | Since |
| ---- | ------- | ----- |
| `boolean` | `true` | v1.0.0 |

When enabled, you can use any Tailwind CSS class in your preview code.

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview tailwindcss={false} />
```

```tsx codespark-preview height=200
import { CodesparkPreview } from '@codespark/react';
import { useState } from 'react';

const code = `export default function App() {
  return (
    <div className="text-center">
      <h1 className="text-xl font-bold">Hello World</h1>
      <p>This is my first Codes Park!</p>
    </div>
  );
}`;

export default function App() {
  const [tailwindcss, setTailwindCSS] = useState(true);

  return (
    <div className="relative">
      <label className="absolute top-0 right-0 z-10 inline-flex cursor-pointer items-center gap-2">
        <span className="text-sm font-medium">Tailwind CSS</span>
        <div className="relative">
          <input type="checkbox" checked={tailwindcss} onChange={e => setTailwindCSS(e.target.checked)} className="peer sr-only" />
          <div className="peer h-5 w-9 rounded-full bg-gray-200 transition-colors peer-checked:bg-black" />
          <div className="absolute top-0.5 left-0.5 h-4 w-4 rounded-full bg-white shadow transition-transform peer-checked:translate-x-4" />
        </div>
      </label>
      <CodesparkPreview code={code} tailwindcss={tailwindcss} />
    </div>
  );
}
```

### preflight

| Type | Default | Since |
| ---- | ------- | ----- |
| `preflight` | `true` | v1.0.1 |

Whether to apply preflight styles (base reset, font smoothing, layout defaults) in the preview iframe.

```css
:root {
  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
  font-size: 14px;
  line-height: 1.5;
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html,
body {
  margin: 0;
  overflow: hidden;
}

html {
  width: 100vw;
  height: 100vh;
  padding: 0;
}

body {
  height: 100%;
  padding: 12px;
  overflow: auto;
  box-sizing: border-box;
  display: flex;
}

#root {
  margin: auto;
}
```

```tsx codespark-preview height=200
import { CodesparkPreview } from '@codespark/react';
import { useState } from 'react';

const code = `export default function App() {
  return (
    <div className="text-center">
      <h1 className="text-xl font-bold">Hello World</h1>
      <p>This is my first Codes Park!</p>
    </div>
  );
}`;

export default function App() {
  const [preflight, setPreflight] = useState(true);

  return (
    <div className="relative">
      <label className="absolute top-0 right-0 z-10 inline-flex cursor-pointer items-center gap-2">
        <span className="text-sm font-medium">Preflight</span>
        <div className="relative">
          <input type="checkbox" checked={preflight} onChange={e => setPreflight(e.target.checked)} className="peer sr-only" />
          <div className="peer h-5 w-9 rounded-full bg-gray-200 transition-colors peer-checked:bg-black" />
          <div className="absolute top-0.5 left-0.5 h-4 w-4 rounded-full bg-white shadow transition-transform peer-checked:translate-x-4" />
        </div>
      </label>
      <CodesparkPreview code={code} preflight={preflight} />
    </div>
  );
}
```

### imports

Custom import map for external dependencies.

| Type | Default | Since |
| ---- | ------- | ----- |
| `Record<string, string>` | Inherited from context | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview imports={{ 'lodash-es': 'https://esm.sh/lodash-es@4.17.21' }} />
```

### height

Height of the preview area in pixels.

| Type | Default | Since |
| ---- | ------- | ----- |
| `number` | `200` | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview height={300} />
```

### className

CSS class name for the preview container.

| Type | Default | Since |
| ---- | ------- | ----- |
| `string` | - | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview className="h-full" />
```

### children

Child elements to inject into the preview iframe, such as `Script`, `Style`, or `Link` components.

| Type | Default | Since |
| ---- | ------- | ----- |
| `ReactNode` | - | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview, Style, Script, Link } from '@codespark/react';

<CodesparkPreview>
  <Style>{`.custom { color: red; }`}</Style>
  <Script src="https://example.com/script.js" />
  <Link rel="stylesheet" href="https://example.com/styles.css" />
</CodesparkPreview>
```

See the [Style](/docs/style), [Script](/docs/script), and [Link](/docs/link) component documentation for more details.

### onError

Callback fired when a runtime error occurs in the preview.

| Type | Default | Since |
| ---- | ------- | ----- |
| `(error: unknown) => void` | - | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview
  onError={error => {
    console.error('Runtime error:', error);
  }}
/>
```

### onLoad

Callback fired when the preview iframe is loaded and ready.

| Type | Default | Since |
| ---- | ------- | ----- |
| `(iframe: HTMLIFrameElement) => void` | - | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview
  onLoad={iframe => {
    console.log('Preview loaded:', iframe);
  }}
/>
```

### onRendered

Callback fired when the preview has finished rendering.

| Type | Default | Since |
| ---- | ------- | ----- |
| `() => void` | - | v1.0.0 |

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview
  onRendered={() => {
    console.log('Render complete');
  }}
/>
```

### onConsole

Callback fired when console methods are called in the preview. Useful for capturing and displaying console output.

| Type | Default | Since |
| ---- | ------- | ----- |
| `(data: OnConsoleData) => void` | - | v1.0.0 |

```tsx
interface OnConsoleData {
  level: string;    // 'log', 'warn', 'error', 'info', 'debug'
  args: unknown[];  // Arguments passed to console method
  duplicate?: boolean;
}
```

```tsx twoslash
// @noErrors
import { CodesparkPreview } from '@codespark/react';
// ---cut---
<CodesparkPreview
  onConsole={data => {
    console.log(`[${data.level}]`, ...data.args);
  }}
/>
```
