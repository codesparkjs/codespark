---
title: What is Codespark
description: A lightweight React playground for live code editing and instant preview in your documentation.
---

import { useState } from 'react';

Codespark is a React component playground for documentation sites, component libraries, and interactive tutorials.

## Why Codespark

Traditional documentation has limitations:

- **Static code blocks** - Users can only read, not interact
- **External sandboxes** - Popular playground like CodeSandbox requires context switching
- **Manual setup** - Each demo needs boilerplate configuration
- **Stale examples** - Code snippets become outdated without validation

Codespark solves these by providing:

- **Live editing** - Modify code and see results instantly
- **Inline preview** - Code and preview side-by-side
- **Auto dependency resolution** - No manual configuration needed
- **Multiple integrations** - Works with React, MDX, and markdown

## Features

- Modular architecture with highly customizable component styles
- Components using popular TailwindCSS and shadcn/ui as the design system
- Real-time preview with hot reloading
- Automatic dependency resolution via esm.sh
- Monaco Editor with syntax highlighting and IntelliSense
- MDX and remark plugin integration
- Rollup/Vite plugin for build-time processing

## How it Works

Codespark transforms your code into a live preview through a streamlined pipeline:

export function FlowDiagram() {
  const [hovered, setHovered] = useState(-1);
  const steps = [
    { title: 'Edit', desc: 'Monaco Editor' },
    { title: 'Track', desc: 'Workspace' },
    { title: 'Analyze', desc: 'AST Parser' },
    { title: 'Compile', desc: 'Babel Transform' },
    { title: 'Send', desc: 'PostMessage' },
    { title: 'Render', desc: 'Iframe Preview' },
  ];
  const progressWidth = hovered >= 0 ? `${((hovered + 0.5) / steps.length) * 100}%` : '0%';

  return (
    <div className="my-8 py-6">
      <div className="relative">
        <div className="absolute top-5 left-0 right-0 h-0.5 bg-border hidden md:block" />
        <div
          className="absolute top-5 left-0 h-0.5 bg-linear-to-r from-blue-500 via-purple-500 to-pink-500 hidden md:block transition-all duration-300 ease-out"
          style={{ width: progressWidth }}
        />
        <div className="grid grid-cols-2 md:grid-cols-6 gap-4 md:gap-2">
          {steps.map((step, i) => (
            <div
              key={i}
              className="flex flex-col items-center text-center group cursor-pointer"
              style={{ animation: `fadeUp 0.4s ease-out ${i * 0.08}s both` }}
              onMouseEnter={() => setHovered(i)}
              onMouseLeave={() => setHovered(-1)}
            >
              <div className={`relative z-10 w-10 h-10 rounded-full bg-surface border-2 flex items-center justify-center font-mono text-sm font-bold transition-all duration-200 ${hovered >= i && hovered >= 0 ? 'border-primary text-primary shadow-[0_0_12px_rgba(124,58,237,0.3)]' : 'border-border text-muted-foreground'}`}>
                {i + 1}
              </div>
              <div className="mt-3 space-y-0.5">
                <div className={`font-semibold text-sm transition-colors ${hovered >= i && hovered >= 0 ? 'text-primary' : ''}`}>{step.title}</div>
                <div className="text-xs text-muted-foreground">{step.desc}</div>
              </div>
            </div>
          ))}
        </div>
      </div>
      <style>{`
        @keyframes fadeUp {
          from { opacity: 0; transform: translateY(16px); }
          to { opacity: 1; transform: translateY(0); }
        }
      `}</style>
    </div>
  );
}

<FlowDiagram />

1. **User Input** - Code changes in the Monaco editor trigger a debounced update

2. **Workspace Management** - The `Workspace` class tracks all files and notifies listeners of changes

3. **Dependency Analysis** - `framework.analyze()` parses the AST to extract:
   - Internal imports (other files in the workspace)
   - External imports (npm packages resolved via esm.sh)

4. **Code Compilation** - `framework.compile()` transforms the code:
   - Converts internal imports to blob URLs
   - Appends React render boilerplate
   - Generates executable ES module code

5. **Iframe Communication** - `PreviewProxy` sends compiled code to a sandboxed iframe via `postMessage`

6. **Live Rendering** - The iframe executes the code as an ES module and renders the React component

## Live Demo

Try editing the code below to see the pipeline in action:

```tsx codespark
import { useState } from 'react';

export default function Demo() {
  const [count, setCount] = useState(0);

  return (
    <div className="p-6 text-center">
      <h2 className="text-2xl font-bold mb-4">
        Live Preview Demo
      </h2>
      <p className="text-muted-foreground mb-4">
        Edit this code to see instant updates!
      </p>
      <button
        onClick={() => setCount(c => c + 1)}
        className="px-4 py-2 bg-gray-200 text-primary-foreground rounded-lg hover:bg-gray-100 dark:bg-gray-800 hover:dark:bg-gray-700 transition-opacity"
      >
        Clicked {count} times
      </button>
    </div>
  );
}
```
